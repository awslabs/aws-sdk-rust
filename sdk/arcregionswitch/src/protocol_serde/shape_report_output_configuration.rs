// Code generated by software.amazon.smithy.rust.codegen.smithy-rs. DO NOT EDIT.
pub fn ser_report_output_configuration(
    encoder: &mut ::aws_smithy_cbor::Encoder,
    input: &crate::types::ReportOutputConfiguration,
) -> ::std::result::Result<(), ::aws_smithy_types::error::operation::SerializationError> {
    encoder.map(1);
    match input {
        crate::types::ReportOutputConfiguration::S3Configuration(inner) => {
            encoder.str("s3Configuration");
            crate::protocol_serde::shape_s3_report_output_configuration::ser_s3_report_output_configuration(encoder, inner)?;
        }
        crate::types::ReportOutputConfiguration::Unknown => {
            return ::std::result::Result::Err(::aws_smithy_types::error::operation::SerializationError::unknown_variant(
                "ReportOutputConfiguration",
            ))
        }
    }
    ::std::result::Result::Ok(())
}

pub(crate) fn de_report_output_configuration(
    decoder: &mut ::aws_smithy_cbor::Decoder,
) -> ::std::result::Result<crate::types::ReportOutputConfiguration, ::aws_smithy_cbor::decode::DeserializeError> {
    fn pair(
        decoder: &mut ::aws_smithy_cbor::Decoder,
    ) -> ::std::result::Result<crate::types::ReportOutputConfiguration, ::aws_smithy_cbor::decode::DeserializeError> {
        Ok(match decoder.str()?.as_ref() {
            "s3Configuration" => crate::types::ReportOutputConfiguration::S3Configuration(
                crate::protocol_serde::shape_s3_report_output_configuration::de_s3_report_output_configuration(decoder)?,
            ),
            _ => {
                decoder.skip()?;
                crate::types::ReportOutputConfiguration::Unknown
            }
        })
    }

    match decoder.map()? {
        None => {
            let variant = pair(decoder)?;
            match decoder.datatype()? {
                ::aws_smithy_cbor::data::Type::Break => {
                    decoder.skip()?;
                    Ok(variant)
                }
                ty => Err(::aws_smithy_cbor::decode::DeserializeError::unexpected_union_variant(
                    ty,
                    decoder.position(),
                )),
            }
        }
        Some(1) => pair(decoder),
        Some(_) => Err(::aws_smithy_cbor::decode::DeserializeError::mixed_union_variants(decoder.position())),
    }
}
