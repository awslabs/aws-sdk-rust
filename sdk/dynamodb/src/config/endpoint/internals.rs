// Code generated by software.amazon.smithy.rust.codegen.smithy-rs. DO NOT EDIT.
#[allow(
    clippy::collapsible_if,
    clippy::bool_comparison,
    clippy::nonminimal_bool,
    clippy::comparison_to_empty,
    clippy::redundant_pattern_matching,
    clippy::useless_asref
)]
pub(super) fn resolve_endpoint(
    _params: &crate::config::endpoint::Params,
    _diagnostic_collector: &mut crate::endpoint_lib::diagnostic::DiagnosticCollector,
    partition_resolver: &crate::endpoint_lib::partition::PartitionResolver,
) -> ::aws_smithy_http::endpoint::Result {
    #[allow(unused_variables)]
    let region = &_params.region;
    #[allow(unused_variables)]
    let use_dual_stack = &_params.use_dual_stack;
    #[allow(unused_variables)]
    let use_fips = &_params.use_fips;
    #[allow(unused_variables)]
    let endpoint = &_params.endpoint;
    #[allow(unused_variables)]
    let account_id = &_params.account_id;
    #[allow(unused_variables)]
    let account_id_endpoint_mode = &_params.account_id_endpoint_mode;
    #[allow(unused_variables)]
    let resource_arn = &_params.resource_arn;
    #[allow(unused_variables)]
    let resource_arn_list = &_params.resource_arn_list;
    #[allow(unused_variables)]
    if let Some(endpoint) = endpoint {
        if (*use_fips) == (true) {
            return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
                "Invalid Configuration: FIPS and custom endpoint are not supported".to_string(),
            ));
        }
        if (*use_dual_stack) == (true) {
            return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
                "Invalid Configuration: Dualstack and custom endpoint are not supported".to_string(),
            ));
        }
        return Ok(::aws_smithy_types::endpoint::Endpoint::builder().url(endpoint.to_owned()).build());
    }
    #[allow(unused_variables)]
    if let Some(region) = region {
        #[allow(unused_variables)]
        if let Some(partition_result) = partition_resolver.resolve_partition(region.as_ref() as &str, _diagnostic_collector) {
            if (region.as_ref() as &str) == ("local") {
                if (*use_fips) == (true) {
                    return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
                        "Invalid Configuration: FIPS and local endpoint are not supported".to_string(),
                    ));
                }
                if (*use_dual_stack) == (true) {
                    return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
                        "Invalid Configuration: Dualstack and local endpoint are not supported".to_string(),
                    ));
                }
                return Ok(::aws_smithy_types::endpoint::Endpoint::builder()
                    .url("http://localhost:8000".to_string())
                    .property(
                        "authSchemes",
                        vec![::aws_smithy_types::Document::from({
                            let mut out = ::std::collections::HashMap::<String, ::aws_smithy_types::Document>::new();
                            out.insert("name".to_string(), "sigv4".to_string().into());
                            out.insert("signingName".to_string(), "dynamodb".to_string().into());
                            out.insert("signingRegion".to_string(), "us-east-1".to_string().into());
                            out
                        })],
                    )
                    .build());
            }
            if (*use_fips) == (true) {
                if (*use_dual_stack) == (true) {
                    if (partition_result.supports_fips()) == (true) {
                        if (partition_result.supports_dual_stack()) == (true) {
                            #[allow(unused_variables)]
                            if let Some(account_id_endpoint_mode) = account_id_endpoint_mode {
                                if (account_id_endpoint_mode.as_ref() as &str) == ("required") {
                                    return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message("Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported"
.to_string()));
                                }
                            }
                            return Ok(::aws_smithy_types::endpoint::Endpoint::builder()
                                .url({
                                    let mut out = String::new();
                                    out.push_str("https://dynamodb-fips.");
                                    #[allow(clippy::needless_borrow)]
                                    out.push_str(&region.as_ref() as &str);
                                    out.push('.');
                                    #[allow(clippy::needless_borrow)]
                                    out.push_str(&partition_result.dual_stack_dns_suffix());
                                    out
                                })
                                .build());
                        }
                    }
                    return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
                        "FIPS and DualStack are enabled, but this partition does not support one or both".to_string(),
                    ));
                }
            }
            if (*use_fips) == (true) {
                if (partition_result.supports_fips()) == (true) {
                    if (partition_result.name()) == ("aws-us-gov") {
                        #[allow(unused_variables)]
                        if let Some(account_id_endpoint_mode) = account_id_endpoint_mode {
                            if (account_id_endpoint_mode.as_ref() as &str) == ("required") {
                                return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message("Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported"
.to_string()));
                            }
                        }
                        return Ok(::aws_smithy_types::endpoint::Endpoint::builder()
                            .url({
                                let mut out = String::new();
                                out.push_str("https://dynamodb.");
                                #[allow(clippy::needless_borrow)]
                                out.push_str(&region.as_ref() as &str);
                                out.push('.');
                                #[allow(clippy::needless_borrow)]
                                out.push_str(&partition_result.dns_suffix());
                                out
                            })
                            .build());
                    }
                    #[allow(unused_variables)]
                    if let Some(account_id_endpoint_mode) = account_id_endpoint_mode {
                        if (account_id_endpoint_mode.as_ref() as &str) == ("required") {
                            return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message("Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported"
.to_string()));
                        }
                    }
                    return Ok(::aws_smithy_types::endpoint::Endpoint::builder()
                        .url({
                            let mut out = String::new();
                            out.push_str("https://dynamodb-fips.");
                            #[allow(clippy::needless_borrow)]
                            out.push_str(&region.as_ref() as &str);
                            out.push('.');
                            #[allow(clippy::needless_borrow)]
                            out.push_str(&partition_result.dns_suffix());
                            out
                        })
                        .build());
                }
                return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
                    "FIPS is enabled but this partition does not support FIPS".to_string(),
                ));
            }
            if (*use_dual_stack) == (true) {
                if (partition_result.supports_dual_stack()) == (true) {
                    #[allow(unused_variables)]
                    if let Some(account_id_endpoint_mode) = account_id_endpoint_mode {
                        if (account_id_endpoint_mode.as_ref() as &str) == ("required") {
                            if !((*use_fips) == (true)) {
                                return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message("Invalid Configuration: AccountIdEndpointMode is required and DualStack is enabled, but DualStack account endpoints are not supported"
.to_string()));
                            }
                            return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message("Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported"
.to_string()));
                        }
                    }
                    return Ok(::aws_smithy_types::endpoint::Endpoint::builder()
                        .url({
                            let mut out = String::new();
                            out.push_str("https://dynamodb.");
                            #[allow(clippy::needless_borrow)]
                            out.push_str(&region.as_ref() as &str);
                            out.push('.');
                            #[allow(clippy::needless_borrow)]
                            out.push_str(&partition_result.dual_stack_dns_suffix());
                            out
                        })
                        .build());
                }
                return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
                    "DualStack is enabled but this partition does not support DualStack".to_string(),
                ));
            }
            #[allow(unused_variables)]
            if let Some(account_id_endpoint_mode) = account_id_endpoint_mode {
                if !((account_id_endpoint_mode.as_ref() as &str) == ("disabled")) {
                    if (partition_result.name()) == ("aws") {
                        if !((*use_fips) == (true)) {
                            if !((*use_dual_stack) == (true)) {
                                #[allow(unused_variables)]
                                if let Some(resource_arn) = resource_arn {
                                    #[allow(unused_variables)]
                                    if let Some(parsed_arn) =
                                        crate::endpoint_lib::arn::parse_arn(resource_arn.as_ref() as &str, _diagnostic_collector)
                                    {
                                        if (parsed_arn.service()) == ("dynamodb") {
                                            if crate::endpoint_lib::host::is_valid_host_label(parsed_arn.region(), false, _diagnostic_collector) {
                                                if (parsed_arn.region()) == (region.as_ref() as &str) {
                                                    if crate::endpoint_lib::host::is_valid_host_label(
                                                        parsed_arn.account_id(),
                                                        false,
                                                        _diagnostic_collector,
                                                    ) {
                                                        return Ok(::aws_smithy_types::endpoint::Endpoint::builder()
                                                            .url({
                                                                let mut out = String::new();
                                                                out.push_str("https://");
                                                                #[allow(clippy::needless_borrow)]
                                                                out.push_str(&parsed_arn.account_id());
                                                                out.push_str(".ddb.");
                                                                #[allow(clippy::needless_borrow)]
                                                                out.push_str(&region.as_ref() as &str);
                                                                out.push('.');
                                                                #[allow(clippy::needless_borrow)]
                                                                out.push_str(&partition_result.dns_suffix());
                                                                out
                                                            })
                                                            .build());
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            #[allow(unused_variables)]
            if let Some(account_id_endpoint_mode) = account_id_endpoint_mode {
                if !((account_id_endpoint_mode.as_ref() as &str) == ("disabled")) {
                    if (partition_result.name()) == ("aws") {
                        if !((*use_fips) == (true)) {
                            if !((*use_dual_stack) == (true)) {
                                #[allow(unused_variables)]
                                if let Some(resource_arn_list) = resource_arn_list {
                                    #[allow(unused_variables)]
                                    if let Some(first_arn) = resource_arn_list.first().cloned() {
                                        #[allow(unused_variables)]
                                        if let Some(parsed_arn) =
                                            crate::endpoint_lib::arn::parse_arn(first_arn.as_ref() as &str, _diagnostic_collector)
                                        {
                                            if (parsed_arn.service()) == ("dynamodb") {
                                                if crate::endpoint_lib::host::is_valid_host_label(parsed_arn.region(), false, _diagnostic_collector) {
                                                    if (parsed_arn.region()) == (region.as_ref() as &str) {
                                                        if crate::endpoint_lib::host::is_valid_host_label(
                                                            parsed_arn.account_id(),
                                                            false,
                                                            _diagnostic_collector,
                                                        ) {
                                                            return Ok(::aws_smithy_types::endpoint::Endpoint::builder()
                                                                .url({
                                                                    let mut out = String::new();
                                                                    out.push_str("https://");
                                                                    #[allow(clippy::needless_borrow)]
                                                                    out.push_str(&parsed_arn.account_id());
                                                                    out.push_str(".ddb.");
                                                                    #[allow(clippy::needless_borrow)]
                                                                    out.push_str(&region.as_ref() as &str);
                                                                    out.push('.');
                                                                    #[allow(clippy::needless_borrow)]
                                                                    out.push_str(&partition_result.dns_suffix());
                                                                    out
                                                                })
                                                                .build());
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            #[allow(unused_variables)]
            if let Some(account_id_endpoint_mode) = account_id_endpoint_mode {
                if !((account_id_endpoint_mode.as_ref() as &str) == ("disabled")) {
                    if (partition_result.name()) == ("aws") {
                        if !((*use_fips) == (true)) {
                            if !((*use_dual_stack) == (true)) {
                                #[allow(unused_variables)]
                                if let Some(account_id) = account_id {
                                    if crate::endpoint_lib::host::is_valid_host_label(account_id.as_ref() as &str, false, _diagnostic_collector) {
                                        return Ok(::aws_smithy_types::endpoint::Endpoint::builder()
                                            .url({
                                                let mut out = String::new();
                                                out.push_str("https://");
                                                #[allow(clippy::needless_borrow)]
                                                out.push_str(&account_id.as_ref() as &str);
                                                out.push_str(".ddb.");
                                                #[allow(clippy::needless_borrow)]
                                                out.push_str(&region.as_ref() as &str);
                                                out.push('.');
                                                #[allow(clippy::needless_borrow)]
                                                out.push_str(&partition_result.dns_suffix());
                                                out
                                            })
                                            .build());
                                    }
                                    return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
                                        "Credentials-sourced account ID parameter is invalid".to_string(),
                                    ));
                                }
                            }
                        }
                    }
                }
            }
            #[allow(unused_variables)]
            if let Some(account_id_endpoint_mode) = account_id_endpoint_mode {
                if (account_id_endpoint_mode.as_ref() as &str) == ("required") {
                    if !((*use_fips) == (true)) {
                        if !((*use_dual_stack) == (true)) {
                            if (partition_result.name()) == ("aws") {
                                return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
                                    "AccountIdEndpointMode is required but no AccountID was provided or able to be loaded".to_string(),
                                ));
                            }
                            return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
                                "Invalid Configuration: AccountIdEndpointMode is required but account endpoints are not supported in this partition"
                                    .to_string(),
                            ));
                        }
                        return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message("Invalid Configuration: AccountIdEndpointMode is required and DualStack is enabled, but DualStack account endpoints are not supported"
.to_string()));
                    }
                    return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
                        "Invalid Configuration: AccountIdEndpointMode is required and FIPS is enabled, but FIPS account endpoints are not supported"
                            .to_string(),
                    ));
                }
            }
            return Ok(::aws_smithy_types::endpoint::Endpoint::builder()
                .url({
                    let mut out = String::new();
                    out.push_str("https://dynamodb.");
                    #[allow(clippy::needless_borrow)]
                    out.push_str(&region.as_ref() as &str);
                    out.push('.');
                    #[allow(clippy::needless_borrow)]
                    out.push_str(&partition_result.dns_suffix());
                    out
                })
                .build());
        }
        #[allow(unreachable_code)]
        return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(format!(
            "No rules matched these parameters. This is a bug. {:?}",
            _params
        )));
    }
    return Err(::aws_smithy_http::endpoint::ResolveEndpointError::message(
        "Invalid Configuration: Missing Region".to_string(),
    ));
}
