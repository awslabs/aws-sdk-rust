// Code generated by software.amazon.smithy.rust.codegen.smithy-rs. DO NOT EDIT.
pub use crate::operation::put_delivery_destination_policy::_put_delivery_destination_policy_output::PutDeliveryDestinationPolicyOutputBuilder;

pub use crate::operation::put_delivery_destination_policy::_put_delivery_destination_policy_input::PutDeliveryDestinationPolicyInputBuilder;

impl crate::operation::put_delivery_destination_policy::builders::PutDeliveryDestinationPolicyInputBuilder {
    /// Sends a request with this input using the given client.
    pub async fn send_with(
        self,
        client: &crate::Client,
    ) -> ::std::result::Result<
        crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicyOutput,
        ::aws_smithy_runtime_api::client::result::SdkError<
            crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicyError,
            ::aws_smithy_runtime_api::client::orchestrator::HttpResponse,
        >,
    > {
        let mut fluent_builder = client.put_delivery_destination_policy();
        fluent_builder.inner = self;
        fluent_builder.send().await
    }
}
/// Fluent builder constructing a request to `PutDeliveryDestinationPolicy`.
///
/// <p>Creates and assigns an IAM policy that grants permissions to CloudWatch Logs to deliver logs cross-account to a specified destination in this account. To configure the delivery of logs from an Amazon Web Services service in another account to a logs delivery destination in the current account, you must do the following:</p>
/// <ul>
/// <li>
/// <p>Create a delivery source, which is a logical object that represents the resource that is actually sending the logs. For more information, see <a href="https://docs.aws.amazon.com/AmazonCloudWatchLogs/latest/APIReference/API_PutDeliverySource.html">PutDeliverySource</a>.</p></li>
/// <li>
/// <p>Create a <i>delivery destination</i>, which is a logical object that represents the actual delivery destination. For more information, see <a href="https://docs.aws.amazon.com/AmazonCloudWatchLogs/latest/APIReference/API_PutDeliveryDestination.html">PutDeliveryDestination</a>.</p></li>
/// <li>
/// <p>Use this operation in the destination account to assign an IAM policy to the destination. This policy allows delivery to that destination.</p></li>
/// <li>
/// <p>Create a <i>delivery</i> by pairing exactly one delivery source and one delivery destination. For more information, see <a href="https://docs.aws.amazon.com/AmazonCloudWatchLogs/latest/APIReference/API_CreateDelivery.html">CreateDelivery</a>.</p></li>
/// </ul>
/// <p>Only some Amazon Web Services services support being configured as a delivery source. These services are listed as <b>Supported \[V2 Permissions\]</b> in the table at <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/AWS-logs-and-resource-policy.html">Enabling logging from Amazon Web Services services.</a></p>
/// <p>The contents of the policy must include two statements. One statement enables general logs delivery, and the other allows delivery to the chosen destination. See the examples for the needed policies.</p>
#[derive(::std::clone::Clone, ::std::fmt::Debug)]
pub struct PutDeliveryDestinationPolicyFluentBuilder {
    handle: ::std::sync::Arc<crate::client::Handle>,
    inner: crate::operation::put_delivery_destination_policy::builders::PutDeliveryDestinationPolicyInputBuilder,
    config_override: ::std::option::Option<crate::config::Builder>,
}
impl
    crate::client::customize::internal::CustomizableSend<
        crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicyOutput,
        crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicyError,
    > for PutDeliveryDestinationPolicyFluentBuilder
{
    fn send(
        self,
        config_override: crate::config::Builder,
    ) -> crate::client::customize::internal::BoxFuture<
        crate::client::customize::internal::SendResult<
            crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicyOutput,
            crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicyError,
        >,
    > {
        ::std::boxed::Box::pin(async move { self.config_override(config_override).send().await })
    }
}
impl PutDeliveryDestinationPolicyFluentBuilder {
    /// Creates a new `PutDeliveryDestinationPolicyFluentBuilder`.
    pub(crate) fn new(handle: ::std::sync::Arc<crate::client::Handle>) -> Self {
        Self {
            handle,
            inner: ::std::default::Default::default(),
            config_override: ::std::option::Option::None,
        }
    }
    /// Access the PutDeliveryDestinationPolicy as a reference.
    pub fn as_input(&self) -> &crate::operation::put_delivery_destination_policy::builders::PutDeliveryDestinationPolicyInputBuilder {
        &self.inner
    }
    /// Sends the request and returns the response.
    ///
    /// If an error occurs, an `SdkError` will be returned with additional details that
    /// can be matched against.
    ///
    /// By default, any retryable failures will be retried twice. Retry behavior
    /// is configurable with the [RetryConfig](aws_smithy_types::retry::RetryConfig), which can be
    /// set when configuring the client.
    pub async fn send(
        self,
    ) -> ::std::result::Result<
        crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicyOutput,
        ::aws_smithy_runtime_api::client::result::SdkError<
            crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicyError,
            ::aws_smithy_runtime_api::client::orchestrator::HttpResponse,
        >,
    > {
        let input = self
            .inner
            .build()
            .map_err(::aws_smithy_runtime_api::client::result::SdkError::construction_failure)?;
        let runtime_plugins = crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicy::operation_runtime_plugins(
            self.handle.runtime_plugins.clone(),
            &self.handle.conf,
            self.config_override,
        );
        crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicy::orchestrate(&runtime_plugins, input).await
    }

    /// Consumes this builder, creating a customizable operation that can be modified before being sent.
    pub fn customize(
        self,
    ) -> crate::client::customize::CustomizableOperation<
        crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicyOutput,
        crate::operation::put_delivery_destination_policy::PutDeliveryDestinationPolicyError,
        Self,
    > {
        crate::client::customize::CustomizableOperation::new(self)
    }
    pub(crate) fn config_override(mut self, config_override: impl ::std::convert::Into<crate::config::Builder>) -> Self {
        self.set_config_override(::std::option::Option::Some(config_override.into()));
        self
    }

    pub(crate) fn set_config_override(&mut self, config_override: ::std::option::Option<crate::config::Builder>) -> &mut Self {
        self.config_override = config_override;
        self
    }
    /// <p>The name of the delivery destination to assign this policy to.</p>
    pub fn delivery_destination_name(mut self, input: impl ::std::convert::Into<::std::string::String>) -> Self {
        self.inner = self.inner.delivery_destination_name(input.into());
        self
    }
    /// <p>The name of the delivery destination to assign this policy to.</p>
    pub fn set_delivery_destination_name(mut self, input: ::std::option::Option<::std::string::String>) -> Self {
        self.inner = self.inner.set_delivery_destination_name(input);
        self
    }
    /// <p>The name of the delivery destination to assign this policy to.</p>
    pub fn get_delivery_destination_name(&self) -> &::std::option::Option<::std::string::String> {
        self.inner.get_delivery_destination_name()
    }
    /// <p>The contents of the policy.</p>
    pub fn delivery_destination_policy(mut self, input: impl ::std::convert::Into<::std::string::String>) -> Self {
        self.inner = self.inner.delivery_destination_policy(input.into());
        self
    }
    /// <p>The contents of the policy.</p>
    pub fn set_delivery_destination_policy(mut self, input: ::std::option::Option<::std::string::String>) -> Self {
        self.inner = self.inner.set_delivery_destination_policy(input);
        self
    }
    /// <p>The contents of the policy.</p>
    pub fn get_delivery_destination_policy(&self) -> &::std::option::Option<::std::string::String> {
        self.inner.get_delivery_destination_policy()
    }
}
