// Code generated by software.amazon.smithy.rust.codegen.smithy-rs. DO NOT EDIT.

/// <p>An object representing a container health check. Health check parameters that are specified in a container definition override any Docker health checks that exist in the container image (such as those specified in a parent image or from the image's Dockerfile). This configuration maps to the <code>HEALTHCHECK</code> parameter of <a href="https://docs.docker.com/engine/reference/run/">docker run</a>.</p><note>
/// <p>The Amazon ECS container agent only monitors and reports on the health checks specified in the task definition. Amazon ECS does not monitor Docker health checks that are embedded in a container image and not specified in the container definition. Health check parameters that are specified in a container definition override any Docker health checks that exist in the container image.</p>
/// </note>
/// <p>You can view the health status of both individual containers and a task with the DescribeTasks API operation or when viewing the task details in the console.</p>
/// <p>The health check is designed to make sure that your containers survive agent restarts, upgrades, or temporary unavailability.</p>
/// <p>The following describes the possible <code>healthStatus</code> values for a container:</p>
/// <ul>
/// <li>
/// <p><code>HEALTHY</code>-The container health check has passed successfully.</p></li>
/// <li>
/// <p><code>UNHEALTHY</code>-The container health check has failed.</p></li>
/// <li>
/// <p><code>UNKNOWN</code>-The container health check is being evaluated, there's no container health check defined, or Amazon ECS doesn't have the health status of the container.</p></li>
/// </ul>
/// <p>The following describes the possible <code>healthStatus</code> values based on the container health checker status of essential containers in the task with the following priority order (high to low):</p>
/// <ul>
/// <li>
/// <p><code>UNHEALTHY</code>-One or more essential containers have failed their health check.</p></li>
/// <li>
/// <p><code>UNKNOWN</code>-Any essential container running within the task is in an <code>UNKNOWN</code> state and no other essential containers have an <code>UNHEALTHY</code> state.</p></li>
/// <li>
/// <p><code>HEALTHY</code>-All essential containers within the task have passed their health checks.</p></li>
/// </ul>
/// <p>Consider the following task health example with 2 containers.</p>
/// <ul>
/// <li>
/// <p>If Container1 is <code>UNHEALTHY</code> and Container2 is <code>UNKNOWN</code>, the task health is <code>UNHEALTHY</code>.</p></li>
/// <li>
/// <p>If Container1 is <code>UNHEALTHY</code> and Container2 is <code>HEALTHY</code>, the task health is <code>UNHEALTHY</code>.</p></li>
/// <li>
/// <p>If Container1 is <code>HEALTHY</code> and Container2 is <code>UNKNOWN</code>, the task health is <code>UNKNOWN</code>.</p></li>
/// <li>
/// <p>If Container1 is <code>HEALTHY</code> and Container2 is <code>HEALTHY</code>, the task health is <code>HEALTHY</code>.</p></li>
/// </ul>
/// <p>Consider the following task health example with 3 containers.</p>
/// <ul>
/// <li>
/// <p>If Container1 is <code>UNHEALTHY</code> and Container2 is <code>UNKNOWN</code>, and Container3 is <code>UNKNOWN</code>, the task health is <code>UNHEALTHY</code>.</p></li>
/// <li>
/// <p>If Container1 is <code>UNHEALTHY</code> and Container2 is <code>UNKNOWN</code>, and Container3 is <code>HEALTHY</code>, the task health is <code>UNHEALTHY</code>.</p></li>
/// <li>
/// <p>If Container1 is <code>UNHEALTHY</code> and Container2 is <code>HEALTHY</code>, and Container3 is <code>HEALTHY</code>, the task health is <code>UNHEALTHY</code>.</p></li>
/// <li>
/// <p>If Container1 is <code>HEALTHY</code> and Container2 is <code>UNKNOWN</code>, and Container3 is <code>HEALTHY</code>, the task health is <code>UNKNOWN</code>.</p></li>
/// <li>
/// <p>If Container1 is <code>HEALTHY</code> and Container2 is <code>UNKNOWN</code>, and Container3 is <code>UNKNOWN</code>, the task health is <code>UNKNOWN</code>.</p></li>
/// <li>
/// <p>If Container1 is <code>HEALTHY</code> and Container2 is <code>HEALTHY</code>, and Container3 is <code>HEALTHY</code>, the task health is <code>HEALTHY</code>.</p></li>
/// </ul>
/// <p>If a task is run manually, and not as part of a service, the task will continue its lifecycle regardless of its health status. For tasks that are part of a service, if the task reports as unhealthy then the task will be stopped and the service scheduler will replace it.</p>
/// <p>The following are notes about container health check support:</p>
/// <ul>
/// <li>
/// <p>When the Amazon ECS agent cannot connect to the Amazon ECS service, the service reports the container as <code>UNHEALTHY</code>.</p></li>
/// <li>
/// <p>The health check statuses are the "last heard from" response from the Amazon ECS agent. There are no assumptions made about the status of the container health checks.</p></li>
/// <li>
/// <p>Container health checks require version 1.17.0 or greater of the Amazon ECS container agent. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-agent-update.html">Updating the Amazon ECS container agent</a>.</p></li>
/// <li>
/// <p>Container health checks are supported for Fargate tasks if you're using platform version <code>1.1.0</code> or greater. For more information, see <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/platform_versions.html">Fargate platform versions</a>.</p></li>
/// <li>
/// <p>Container health checks aren't supported for tasks that are part of a service that's configured to use a Classic Load Balancer.</p></li>
/// </ul>
#[non_exhaustive]
#[derive(::std::clone::Clone, ::std::cmp::PartialEq, ::std::fmt::Debug)]
pub struct HealthCheck {
    /// <p>A string array representing the command that the container runs to determine if it is healthy. The string array must start with <code>CMD</code> to run the command arguments directly, or <code>CMD-SHELL</code> to run the command with the container's default shell.</p>
    /// <p>When you use the Amazon Web Services Management Console JSON panel, the Command Line Interface, or the APIs, enclose the list of commands in double quotes and brackets.</p>
    /// <p><code>[ "CMD-SHELL", "curl -f http://localhost/ || exit 1" ]</code></p>
    /// <p>You don't include the double quotes and brackets when you use the Amazon Web Services Management Console.</p>
    /// <p><code> CMD-SHELL, curl -f http://localhost/ || exit 1</code></p>
    /// <p>An exit code of 0 indicates success, and non-zero exit code indicates failure. For more information, see <code>HealthCheck</code> in the <a href="https://docs.docker.com/engine/api/v1.35/#operation/ContainerCreate">Create a container</a> section of the <a href="https://docs.docker.com/engine/api/v1.35/">Docker Remote API</a>.</p>
    pub command: ::std::vec::Vec<::std::string::String>,
    /// <p>The time period in seconds between each health check execution. You may specify between 5 and 300 seconds. The default value is 30 seconds.</p>
    pub interval: ::std::option::Option<i32>,
    /// <p>The time period in seconds to wait for a health check to succeed before it is considered a failure. You may specify between 2 and 60 seconds. The default value is 5.</p>
    pub timeout: ::std::option::Option<i32>,
    /// <p>The number of times to retry a failed health check before the container is considered unhealthy. You may specify between 1 and 10 retries. The default value is 3.</p>
    pub retries: ::std::option::Option<i32>,
    /// <p>The optional grace period to provide containers time to bootstrap before failed health checks count towards the maximum number of retries. You can specify between 0 and 300 seconds. By default, the <code>startPeriod</code> is off.</p><note>
    /// <p>If a health check succeeds within the <code>startPeriod</code>, then the container is considered healthy and any subsequent failures count toward the maximum number of retries.</p>
    /// </note>
    pub start_period: ::std::option::Option<i32>,
}
impl HealthCheck {
    /// <p>A string array representing the command that the container runs to determine if it is healthy. The string array must start with <code>CMD</code> to run the command arguments directly, or <code>CMD-SHELL</code> to run the command with the container's default shell.</p>
    /// <p>When you use the Amazon Web Services Management Console JSON panel, the Command Line Interface, or the APIs, enclose the list of commands in double quotes and brackets.</p>
    /// <p><code>[ "CMD-SHELL", "curl -f http://localhost/ || exit 1" ]</code></p>
    /// <p>You don't include the double quotes and brackets when you use the Amazon Web Services Management Console.</p>
    /// <p><code> CMD-SHELL, curl -f http://localhost/ || exit 1</code></p>
    /// <p>An exit code of 0 indicates success, and non-zero exit code indicates failure. For more information, see <code>HealthCheck</code> in the <a href="https://docs.docker.com/engine/api/v1.35/#operation/ContainerCreate">Create a container</a> section of the <a href="https://docs.docker.com/engine/api/v1.35/">Docker Remote API</a>.</p>
    pub fn command(&self) -> &[::std::string::String] {
        use std::ops::Deref;
        self.command.deref()
    }
    /// <p>The time period in seconds between each health check execution. You may specify between 5 and 300 seconds. The default value is 30 seconds.</p>
    pub fn interval(&self) -> ::std::option::Option<i32> {
        self.interval
    }
    /// <p>The time period in seconds to wait for a health check to succeed before it is considered a failure. You may specify between 2 and 60 seconds. The default value is 5.</p>
    pub fn timeout(&self) -> ::std::option::Option<i32> {
        self.timeout
    }
    /// <p>The number of times to retry a failed health check before the container is considered unhealthy. You may specify between 1 and 10 retries. The default value is 3.</p>
    pub fn retries(&self) -> ::std::option::Option<i32> {
        self.retries
    }
    /// <p>The optional grace period to provide containers time to bootstrap before failed health checks count towards the maximum number of retries. You can specify between 0 and 300 seconds. By default, the <code>startPeriod</code> is off.</p><note>
    /// <p>If a health check succeeds within the <code>startPeriod</code>, then the container is considered healthy and any subsequent failures count toward the maximum number of retries.</p>
    /// </note>
    pub fn start_period(&self) -> ::std::option::Option<i32> {
        self.start_period
    }
}
impl HealthCheck {
    /// Creates a new builder-style object to manufacture [`HealthCheck`](crate::types::HealthCheck).
    pub fn builder() -> crate::types::builders::HealthCheckBuilder {
        crate::types::builders::HealthCheckBuilder::default()
    }
}

/// A builder for [`HealthCheck`](crate::types::HealthCheck).
#[non_exhaustive]
#[derive(::std::clone::Clone, ::std::cmp::PartialEq, ::std::default::Default, ::std::fmt::Debug)]
pub struct HealthCheckBuilder {
    pub(crate) command: ::std::option::Option<::std::vec::Vec<::std::string::String>>,
    pub(crate) interval: ::std::option::Option<i32>,
    pub(crate) timeout: ::std::option::Option<i32>,
    pub(crate) retries: ::std::option::Option<i32>,
    pub(crate) start_period: ::std::option::Option<i32>,
}
impl HealthCheckBuilder {
    /// Appends an item to `command`.
    ///
    /// To override the contents of this collection use [`set_command`](Self::set_command).
    ///
    /// <p>A string array representing the command that the container runs to determine if it is healthy. The string array must start with <code>CMD</code> to run the command arguments directly, or <code>CMD-SHELL</code> to run the command with the container's default shell.</p>
    /// <p>When you use the Amazon Web Services Management Console JSON panel, the Command Line Interface, or the APIs, enclose the list of commands in double quotes and brackets.</p>
    /// <p><code>[ "CMD-SHELL", "curl -f http://localhost/ || exit 1" ]</code></p>
    /// <p>You don't include the double quotes and brackets when you use the Amazon Web Services Management Console.</p>
    /// <p><code> CMD-SHELL, curl -f http://localhost/ || exit 1</code></p>
    /// <p>An exit code of 0 indicates success, and non-zero exit code indicates failure. For more information, see <code>HealthCheck</code> in the <a href="https://docs.docker.com/engine/api/v1.35/#operation/ContainerCreate">Create a container</a> section of the <a href="https://docs.docker.com/engine/api/v1.35/">Docker Remote API</a>.</p>
    pub fn command(mut self, input: impl ::std::convert::Into<::std::string::String>) -> Self {
        let mut v = self.command.unwrap_or_default();
        v.push(input.into());
        self.command = ::std::option::Option::Some(v);
        self
    }
    /// <p>A string array representing the command that the container runs to determine if it is healthy. The string array must start with <code>CMD</code> to run the command arguments directly, or <code>CMD-SHELL</code> to run the command with the container's default shell.</p>
    /// <p>When you use the Amazon Web Services Management Console JSON panel, the Command Line Interface, or the APIs, enclose the list of commands in double quotes and brackets.</p>
    /// <p><code>[ "CMD-SHELL", "curl -f http://localhost/ || exit 1" ]</code></p>
    /// <p>You don't include the double quotes and brackets when you use the Amazon Web Services Management Console.</p>
    /// <p><code> CMD-SHELL, curl -f http://localhost/ || exit 1</code></p>
    /// <p>An exit code of 0 indicates success, and non-zero exit code indicates failure. For more information, see <code>HealthCheck</code> in the <a href="https://docs.docker.com/engine/api/v1.35/#operation/ContainerCreate">Create a container</a> section of the <a href="https://docs.docker.com/engine/api/v1.35/">Docker Remote API</a>.</p>
    pub fn set_command(mut self, input: ::std::option::Option<::std::vec::Vec<::std::string::String>>) -> Self {
        self.command = input;
        self
    }
    /// <p>A string array representing the command that the container runs to determine if it is healthy. The string array must start with <code>CMD</code> to run the command arguments directly, or <code>CMD-SHELL</code> to run the command with the container's default shell.</p>
    /// <p>When you use the Amazon Web Services Management Console JSON panel, the Command Line Interface, or the APIs, enclose the list of commands in double quotes and brackets.</p>
    /// <p><code>[ "CMD-SHELL", "curl -f http://localhost/ || exit 1" ]</code></p>
    /// <p>You don't include the double quotes and brackets when you use the Amazon Web Services Management Console.</p>
    /// <p><code> CMD-SHELL, curl -f http://localhost/ || exit 1</code></p>
    /// <p>An exit code of 0 indicates success, and non-zero exit code indicates failure. For more information, see <code>HealthCheck</code> in the <a href="https://docs.docker.com/engine/api/v1.35/#operation/ContainerCreate">Create a container</a> section of the <a href="https://docs.docker.com/engine/api/v1.35/">Docker Remote API</a>.</p>
    pub fn get_command(&self) -> &::std::option::Option<::std::vec::Vec<::std::string::String>> {
        &self.command
    }
    /// <p>The time period in seconds between each health check execution. You may specify between 5 and 300 seconds. The default value is 30 seconds.</p>
    pub fn interval(mut self, input: i32) -> Self {
        self.interval = ::std::option::Option::Some(input);
        self
    }
    /// <p>The time period in seconds between each health check execution. You may specify between 5 and 300 seconds. The default value is 30 seconds.</p>
    pub fn set_interval(mut self, input: ::std::option::Option<i32>) -> Self {
        self.interval = input;
        self
    }
    /// <p>The time period in seconds between each health check execution. You may specify between 5 and 300 seconds. The default value is 30 seconds.</p>
    pub fn get_interval(&self) -> &::std::option::Option<i32> {
        &self.interval
    }
    /// <p>The time period in seconds to wait for a health check to succeed before it is considered a failure. You may specify between 2 and 60 seconds. The default value is 5.</p>
    pub fn timeout(mut self, input: i32) -> Self {
        self.timeout = ::std::option::Option::Some(input);
        self
    }
    /// <p>The time period in seconds to wait for a health check to succeed before it is considered a failure. You may specify between 2 and 60 seconds. The default value is 5.</p>
    pub fn set_timeout(mut self, input: ::std::option::Option<i32>) -> Self {
        self.timeout = input;
        self
    }
    /// <p>The time period in seconds to wait for a health check to succeed before it is considered a failure. You may specify between 2 and 60 seconds. The default value is 5.</p>
    pub fn get_timeout(&self) -> &::std::option::Option<i32> {
        &self.timeout
    }
    /// <p>The number of times to retry a failed health check before the container is considered unhealthy. You may specify between 1 and 10 retries. The default value is 3.</p>
    pub fn retries(mut self, input: i32) -> Self {
        self.retries = ::std::option::Option::Some(input);
        self
    }
    /// <p>The number of times to retry a failed health check before the container is considered unhealthy. You may specify between 1 and 10 retries. The default value is 3.</p>
    pub fn set_retries(mut self, input: ::std::option::Option<i32>) -> Self {
        self.retries = input;
        self
    }
    /// <p>The number of times to retry a failed health check before the container is considered unhealthy. You may specify between 1 and 10 retries. The default value is 3.</p>
    pub fn get_retries(&self) -> &::std::option::Option<i32> {
        &self.retries
    }
    /// <p>The optional grace period to provide containers time to bootstrap before failed health checks count towards the maximum number of retries. You can specify between 0 and 300 seconds. By default, the <code>startPeriod</code> is off.</p><note>
    /// <p>If a health check succeeds within the <code>startPeriod</code>, then the container is considered healthy and any subsequent failures count toward the maximum number of retries.</p>
    /// </note>
    pub fn start_period(mut self, input: i32) -> Self {
        self.start_period = ::std::option::Option::Some(input);
        self
    }
    /// <p>The optional grace period to provide containers time to bootstrap before failed health checks count towards the maximum number of retries. You can specify between 0 and 300 seconds. By default, the <code>startPeriod</code> is off.</p><note>
    /// <p>If a health check succeeds within the <code>startPeriod</code>, then the container is considered healthy and any subsequent failures count toward the maximum number of retries.</p>
    /// </note>
    pub fn set_start_period(mut self, input: ::std::option::Option<i32>) -> Self {
        self.start_period = input;
        self
    }
    /// <p>The optional grace period to provide containers time to bootstrap before failed health checks count towards the maximum number of retries. You can specify between 0 and 300 seconds. By default, the <code>startPeriod</code> is off.</p><note>
    /// <p>If a health check succeeds within the <code>startPeriod</code>, then the container is considered healthy and any subsequent failures count toward the maximum number of retries.</p>
    /// </note>
    pub fn get_start_period(&self) -> &::std::option::Option<i32> {
        &self.start_period
    }
    /// Consumes the builder and constructs a [`HealthCheck`](crate::types::HealthCheck).
    /// This method will fail if any of the following fields are not set:
    /// - [`command`](crate::types::builders::HealthCheckBuilder::command)
    pub fn build(self) -> ::std::result::Result<crate::types::HealthCheck, ::aws_smithy_types::error::operation::BuildError> {
        ::std::result::Result::Ok(crate::types::HealthCheck {
            command: self.command.ok_or_else(|| {
                ::aws_smithy_types::error::operation::BuildError::missing_field(
                    "command",
                    "command was not specified but it is required when building HealthCheck",
                )
            })?,
            interval: self.interval,
            timeout: self.timeout,
            retries: self.retries,
            start_period: self.start_period,
        })
    }
}
