// Code generated by software.amazon.smithy.rust.codegen.smithy-rs. DO NOT EDIT.

/// <p>A signing rule that specifies a signing profile and optional repository filters. When an image is pushed to a matching repository, a signing job is created using the specified profile.</p>
#[non_exhaustive]
#[derive(::std::clone::Clone, ::std::cmp::PartialEq, ::std::fmt::Debug)]
pub struct SigningRule {
    /// <p>The ARN of the Amazon Web Services Signer signing profile to use for signing images that match this rule. For more information about signing profiles, see <a href="https://docs.aws.amazon.com/signer/latest/developerguide/signing-profiles.html">Signing profiles</a> in the <i>Amazon Web Services Signer Developer Guide</i>.</p>
    pub signing_profile_arn: ::std::string::String,
    /// <p>A list of repository filters that determine which repositories have their images signed on push. If no filters are specified, all images pushed to the registry are signed using the rule's signing profile. Maximum of 100 filters per rule.</p>
    pub repository_filters: ::std::option::Option<::std::vec::Vec<crate::types::SigningRepositoryFilter>>,
}
impl SigningRule {
    /// <p>The ARN of the Amazon Web Services Signer signing profile to use for signing images that match this rule. For more information about signing profiles, see <a href="https://docs.aws.amazon.com/signer/latest/developerguide/signing-profiles.html">Signing profiles</a> in the <i>Amazon Web Services Signer Developer Guide</i>.</p>
    pub fn signing_profile_arn(&self) -> &str {
        use std::ops::Deref;
        self.signing_profile_arn.deref()
    }
    /// <p>A list of repository filters that determine which repositories have their images signed on push. If no filters are specified, all images pushed to the registry are signed using the rule's signing profile. Maximum of 100 filters per rule.</p>
    ///
    /// If no value was sent for this field, a default will be set. If you want to determine if no value was sent, use `.repository_filters.is_none()`.
    pub fn repository_filters(&self) -> &[crate::types::SigningRepositoryFilter] {
        self.repository_filters.as_deref().unwrap_or_default()
    }
}
impl SigningRule {
    /// Creates a new builder-style object to manufacture [`SigningRule`](crate::types::SigningRule).
    pub fn builder() -> crate::types::builders::SigningRuleBuilder {
        crate::types::builders::SigningRuleBuilder::default()
    }
}

/// A builder for [`SigningRule`](crate::types::SigningRule).
#[derive(::std::clone::Clone, ::std::cmp::PartialEq, ::std::default::Default, ::std::fmt::Debug)]
#[non_exhaustive]
pub struct SigningRuleBuilder {
    pub(crate) signing_profile_arn: ::std::option::Option<::std::string::String>,
    pub(crate) repository_filters: ::std::option::Option<::std::vec::Vec<crate::types::SigningRepositoryFilter>>,
}
impl SigningRuleBuilder {
    /// <p>The ARN of the Amazon Web Services Signer signing profile to use for signing images that match this rule. For more information about signing profiles, see <a href="https://docs.aws.amazon.com/signer/latest/developerguide/signing-profiles.html">Signing profiles</a> in the <i>Amazon Web Services Signer Developer Guide</i>.</p>
    /// This field is required.
    pub fn signing_profile_arn(mut self, input: impl ::std::convert::Into<::std::string::String>) -> Self {
        self.signing_profile_arn = ::std::option::Option::Some(input.into());
        self
    }
    /// <p>The ARN of the Amazon Web Services Signer signing profile to use for signing images that match this rule. For more information about signing profiles, see <a href="https://docs.aws.amazon.com/signer/latest/developerguide/signing-profiles.html">Signing profiles</a> in the <i>Amazon Web Services Signer Developer Guide</i>.</p>
    pub fn set_signing_profile_arn(mut self, input: ::std::option::Option<::std::string::String>) -> Self {
        self.signing_profile_arn = input;
        self
    }
    /// <p>The ARN of the Amazon Web Services Signer signing profile to use for signing images that match this rule. For more information about signing profiles, see <a href="https://docs.aws.amazon.com/signer/latest/developerguide/signing-profiles.html">Signing profiles</a> in the <i>Amazon Web Services Signer Developer Guide</i>.</p>
    pub fn get_signing_profile_arn(&self) -> &::std::option::Option<::std::string::String> {
        &self.signing_profile_arn
    }
    /// Appends an item to `repository_filters`.
    ///
    /// To override the contents of this collection use [`set_repository_filters`](Self::set_repository_filters).
    ///
    /// <p>A list of repository filters that determine which repositories have their images signed on push. If no filters are specified, all images pushed to the registry are signed using the rule's signing profile. Maximum of 100 filters per rule.</p>
    pub fn repository_filters(mut self, input: crate::types::SigningRepositoryFilter) -> Self {
        let mut v = self.repository_filters.unwrap_or_default();
        v.push(input);
        self.repository_filters = ::std::option::Option::Some(v);
        self
    }
    /// <p>A list of repository filters that determine which repositories have their images signed on push. If no filters are specified, all images pushed to the registry are signed using the rule's signing profile. Maximum of 100 filters per rule.</p>
    pub fn set_repository_filters(mut self, input: ::std::option::Option<::std::vec::Vec<crate::types::SigningRepositoryFilter>>) -> Self {
        self.repository_filters = input;
        self
    }
    /// <p>A list of repository filters that determine which repositories have their images signed on push. If no filters are specified, all images pushed to the registry are signed using the rule's signing profile. Maximum of 100 filters per rule.</p>
    pub fn get_repository_filters(&self) -> &::std::option::Option<::std::vec::Vec<crate::types::SigningRepositoryFilter>> {
        &self.repository_filters
    }
    /// Consumes the builder and constructs a [`SigningRule`](crate::types::SigningRule).
    /// This method will fail if any of the following fields are not set:
    /// - [`signing_profile_arn`](crate::types::builders::SigningRuleBuilder::signing_profile_arn)
    pub fn build(self) -> ::std::result::Result<crate::types::SigningRule, ::aws_smithy_types::error::operation::BuildError> {
        ::std::result::Result::Ok(crate::types::SigningRule {
            signing_profile_arn: self.signing_profile_arn.ok_or_else(|| {
                ::aws_smithy_types::error::operation::BuildError::missing_field(
                    "signing_profile_arn",
                    "signing_profile_arn was not specified but it is required when building SigningRule",
                )
            })?,
            repository_filters: self.repository_filters,
        })
    }
}
