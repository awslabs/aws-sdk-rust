// Code generated by software.amazon.smithy.rust.codegen.smithy-rs. DO NOT EDIT.

/// <p>The configuration for a policy engine associated with a gateway. A policy engine is a collection of policies that evaluates and authorizes agent tool calls. When associated with a gateway, the policy engine intercepts all agent requests and determines whether to allow or deny each action based on the defined policies.</p>
#[non_exhaustive]
#[derive(::std::clone::Clone, ::std::cmp::PartialEq, ::std::fmt::Debug)]
pub struct GatewayPolicyEngineConfiguration {
    /// <p>The ARN of the policy engine. The policy engine contains Cedar policies that define fine-grained authorization rules specifying who can perform what actions on which resources as agents interact through the gateway.</p>
    pub arn: ::std::string::String,
    /// <p>The enforcement mode for the policy engine. Valid values include:</p>
    /// <ul>
    /// <li>
    /// <p><code>LOG_ONLY</code> - The policy engine evaluates each action against your policies and adds traces on whether tool calls would be allowed or denied, but does not enforce the decision. Use this mode to test and validate policies before enabling enforcement.</p></li>
    /// <li>
    /// <p><code>ENFORCE</code> - The policy engine evaluates actions against your policies and enforces decisions by allowing or denying agent operations. Test and validate policies in <code>LOG_ONLY</code> mode before enabling enforcement to avoid unintended denials or adversely affecting production traffic.</p></li>
    /// </ul>
    pub mode: crate::types::GatewayPolicyEngineMode,
}
impl GatewayPolicyEngineConfiguration {
    /// <p>The ARN of the policy engine. The policy engine contains Cedar policies that define fine-grained authorization rules specifying who can perform what actions on which resources as agents interact through the gateway.</p>
    pub fn arn(&self) -> &str {
        use std::ops::Deref;
        self.arn.deref()
    }
    /// <p>The enforcement mode for the policy engine. Valid values include:</p>
    /// <ul>
    /// <li>
    /// <p><code>LOG_ONLY</code> - The policy engine evaluates each action against your policies and adds traces on whether tool calls would be allowed or denied, but does not enforce the decision. Use this mode to test and validate policies before enabling enforcement.</p></li>
    /// <li>
    /// <p><code>ENFORCE</code> - The policy engine evaluates actions against your policies and enforces decisions by allowing or denying agent operations. Test and validate policies in <code>LOG_ONLY</code> mode before enabling enforcement to avoid unintended denials or adversely affecting production traffic.</p></li>
    /// </ul>
    pub fn mode(&self) -> &crate::types::GatewayPolicyEngineMode {
        &self.mode
    }
}
impl GatewayPolicyEngineConfiguration {
    /// Creates a new builder-style object to manufacture [`GatewayPolicyEngineConfiguration`](crate::types::GatewayPolicyEngineConfiguration).
    pub fn builder() -> crate::types::builders::GatewayPolicyEngineConfigurationBuilder {
        crate::types::builders::GatewayPolicyEngineConfigurationBuilder::default()
    }
}

/// A builder for [`GatewayPolicyEngineConfiguration`](crate::types::GatewayPolicyEngineConfiguration).
#[derive(::std::clone::Clone, ::std::cmp::PartialEq, ::std::default::Default, ::std::fmt::Debug)]
#[non_exhaustive]
pub struct GatewayPolicyEngineConfigurationBuilder {
    pub(crate) arn: ::std::option::Option<::std::string::String>,
    pub(crate) mode: ::std::option::Option<crate::types::GatewayPolicyEngineMode>,
}
impl GatewayPolicyEngineConfigurationBuilder {
    /// <p>The ARN of the policy engine. The policy engine contains Cedar policies that define fine-grained authorization rules specifying who can perform what actions on which resources as agents interact through the gateway.</p>
    /// This field is required.
    pub fn arn(mut self, input: impl ::std::convert::Into<::std::string::String>) -> Self {
        self.arn = ::std::option::Option::Some(input.into());
        self
    }
    /// <p>The ARN of the policy engine. The policy engine contains Cedar policies that define fine-grained authorization rules specifying who can perform what actions on which resources as agents interact through the gateway.</p>
    pub fn set_arn(mut self, input: ::std::option::Option<::std::string::String>) -> Self {
        self.arn = input;
        self
    }
    /// <p>The ARN of the policy engine. The policy engine contains Cedar policies that define fine-grained authorization rules specifying who can perform what actions on which resources as agents interact through the gateway.</p>
    pub fn get_arn(&self) -> &::std::option::Option<::std::string::String> {
        &self.arn
    }
    /// <p>The enforcement mode for the policy engine. Valid values include:</p>
    /// <ul>
    /// <li>
    /// <p><code>LOG_ONLY</code> - The policy engine evaluates each action against your policies and adds traces on whether tool calls would be allowed or denied, but does not enforce the decision. Use this mode to test and validate policies before enabling enforcement.</p></li>
    /// <li>
    /// <p><code>ENFORCE</code> - The policy engine evaluates actions against your policies and enforces decisions by allowing or denying agent operations. Test and validate policies in <code>LOG_ONLY</code> mode before enabling enforcement to avoid unintended denials or adversely affecting production traffic.</p></li>
    /// </ul>
    /// This field is required.
    pub fn mode(mut self, input: crate::types::GatewayPolicyEngineMode) -> Self {
        self.mode = ::std::option::Option::Some(input);
        self
    }
    /// <p>The enforcement mode for the policy engine. Valid values include:</p>
    /// <ul>
    /// <li>
    /// <p><code>LOG_ONLY</code> - The policy engine evaluates each action against your policies and adds traces on whether tool calls would be allowed or denied, but does not enforce the decision. Use this mode to test and validate policies before enabling enforcement.</p></li>
    /// <li>
    /// <p><code>ENFORCE</code> - The policy engine evaluates actions against your policies and enforces decisions by allowing or denying agent operations. Test and validate policies in <code>LOG_ONLY</code> mode before enabling enforcement to avoid unintended denials or adversely affecting production traffic.</p></li>
    /// </ul>
    pub fn set_mode(mut self, input: ::std::option::Option<crate::types::GatewayPolicyEngineMode>) -> Self {
        self.mode = input;
        self
    }
    /// <p>The enforcement mode for the policy engine. Valid values include:</p>
    /// <ul>
    /// <li>
    /// <p><code>LOG_ONLY</code> - The policy engine evaluates each action against your policies and adds traces on whether tool calls would be allowed or denied, but does not enforce the decision. Use this mode to test and validate policies before enabling enforcement.</p></li>
    /// <li>
    /// <p><code>ENFORCE</code> - The policy engine evaluates actions against your policies and enforces decisions by allowing or denying agent operations. Test and validate policies in <code>LOG_ONLY</code> mode before enabling enforcement to avoid unintended denials or adversely affecting production traffic.</p></li>
    /// </ul>
    pub fn get_mode(&self) -> &::std::option::Option<crate::types::GatewayPolicyEngineMode> {
        &self.mode
    }
    /// Consumes the builder and constructs a [`GatewayPolicyEngineConfiguration`](crate::types::GatewayPolicyEngineConfiguration).
    /// This method will fail if any of the following fields are not set:
    /// - [`arn`](crate::types::builders::GatewayPolicyEngineConfigurationBuilder::arn)
    /// - [`mode`](crate::types::builders::GatewayPolicyEngineConfigurationBuilder::mode)
    pub fn build(self) -> ::std::result::Result<crate::types::GatewayPolicyEngineConfiguration, ::aws_smithy_types::error::operation::BuildError> {
        ::std::result::Result::Ok(crate::types::GatewayPolicyEngineConfiguration {
            arn: self.arn.ok_or_else(|| {
                ::aws_smithy_types::error::operation::BuildError::missing_field(
                    "arn",
                    "arn was not specified but it is required when building GatewayPolicyEngineConfiguration",
                )
            })?,
            mode: self.mode.ok_or_else(|| {
                ::aws_smithy_types::error::operation::BuildError::missing_field(
                    "mode",
                    "mode was not specified but it is required when building GatewayPolicyEngineConfiguration",
                )
            })?,
        })
    }
}
